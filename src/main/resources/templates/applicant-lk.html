<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Личный кабинет</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-3">
    <div class="d-flex justify-content-end align-items-center">
        <img src="/images/profile-icon.png" alt="Profile Icon" class="rounded-circle me-2" style="width: 40px; height: 40px;">
        <span th:text="${applicant.email}" class="me-2"></span>
        <a href="/logout" class="btn btn-outline-secondary">Выход</a>
    </div>

    <ul class="nav nav-tabs justify-content-center mt-3">
        <li class="nav-item">
            <a class="nav-link active" href="#documents" data-bs-toggle="tab">Документы</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#list" data-bs-toggle="tab">Список</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#settings" data-bs-toggle="tab">Настройки</a>
        </li>
    </ul>

    <div class="tab-content mt-3">
        <div id="documents" class="tab-pane fade show active">
            <h2 class="text-center">Загрузка документов</h2>
            <form method="POST" enctype="multipart/form-data" action="/applicant/lk/edit/docs" class="text-center mb-3">
                <div class="mb-3">
                    <input name="file" type="file" id="fileInput" multiple class="form-control">
                </div>
                <button type="submit" class="btn btn-success">Сохранить файлы</button>
            </form>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>Название файла</th>
                    <th>Действия</th>
                </tr>
                </thead>
                <tbody id="fileList">
                <!-- Файлы будут добавлены сюда динамически -->
                </tbody>
            </table>
        </div>

        <div id="list" class="tab-pane fade">
            <h2 class="text-center">Список абитуриентов</h2>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>Имя</th>
                    <th>Баллы</th>
                </tr>
                </thead>
                <tbody>
                <!-- Здесь данные будут загружаться из базы данных -->
                <tr>
                    <td>Иван Иванов</td>
                    <td>95</td>
                </tr>
                <tr>
                    <td>Анна Смирнова</td>
                    <td>89</td>
                </tr>
                </tbody>
            </table>
        </div>

        <div id="settings" class="tab-pane fade">
            <h2 class="text-center">Настройки</h2>
            <form method="POST" action="/applicant/lk/edit/settings" class="text-center">
                <div class="mb-3">
                    <label for="email" class="form-label">Почта:</label>
                    <input type="email" id="email" name="email" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label">Старый пароль:</label>
                    <input type="password" id="password" name="password" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="new_password" class="form-label">Новый пароль:</label>
                    <input type="password" id="new_password" name="new_password" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="phone" class="form-label">Телефон:</label>
                    <input type="tel" id="phone" name="phone" class="form-control">
                </div>
                <button type="submit" class="btn btn-success">Сохранить изменения</button>
            </form>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const fileInput = document.getElementById('fileInput');
    const fileList = document.getElementById('fileList');
    let allFiles = [];

    fileInput.addEventListener('change', () => {
        allFiles = allFiles.concat(Array.from(fileInput.files));
        fileInput.value = '';
        updateFileList();
    });

    function updateFileList() {
        fileList.innerHTML = '';

        allFiles.forEach((file, index) => {
            const row = document.createElement('tr');

            const fileNameCell = document.createElement('td');
            fileNameCell.textContent = file.name;

            const actionsCell = document.createElement('td');
            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'Удалить';
            deleteButton.className = 'btn btn-danger';

            deleteButton.onclick = () => {
                allFiles.splice(index, 1);
                updateFileList();
            };

            actionsCell.appendChild(deleteButton);
            row.appendChild(fileNameCell);
            row.appendChild(actionsCell);
            fileList.appendChild(row);
        });
    }
</script>

</body>
</html>
